[gd_scene load_steps=10 format=3 uid="uid://c7li6eahkjc4v"]

[ext_resource type="Script" path="res://Scripts/Guns/player_ak.gd" id="1_1mpfk"]
[ext_resource type="PackedScene" uid="uid://dp1obylcr1k1c" path="res://Assets/Models/Arms/Player_Arms.blend" id="2_ma3mt"]
[ext_resource type="Shader" path="res://Shaders/ps1model.gdshader" id="3_fc2cq"]
[ext_resource type="Texture2D" uid="uid://dmr5hsw4n6nyr" path="res://Assets/Models/Arms/PlayerArms.png" id="4_u7why"]
[ext_resource type="PackedScene" uid="uid://co4d8g7bmm3ss" path="res://Assets/Models/PSXAssaultRifle[FIXED]/AK/AK74U/AK74U.fbx" id="5_0c360"]
[ext_resource type="Texture2D" uid="uid://bmeyoh5elqon3" path="res://Assets/Models/PSXAssaultRifle[FIXED]/AK/Textures/AKU_Texture.png" id="6_mxcl0"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_wbipc"]
render_priority = 0
shader = ExtResource("3_fc2cq")
shader_parameter/affine_mapping = false
shader_parameter/alpha_scissor = 0.5
shader_parameter/jitter = 0.25
shader_parameter/resolution = Vector2i(320, 240)
shader_parameter/albedo = ExtResource("4_u7why")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_h0gdx"]
render_priority = 0
shader = ExtResource("3_fc2cq")
shader_parameter/affine_mapping = false
shader_parameter/alpha_scissor = 0.5
shader_parameter/jitter = 0.25
shader_parameter/resolution = Vector2i(320, 240)
shader_parameter/albedo = ExtResource("6_mxcl0")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_3orc7"]
render_priority = 0
shader = ExtResource("3_fc2cq")
shader_parameter/affine_mapping = false
shader_parameter/alpha_scissor = 0.5
shader_parameter/jitter = 0.25
shader_parameter/resolution = Vector2i(320, 240)
shader_parameter/albedo = ExtResource("4_u7why")

[node name="PlayerRifle" type="Node3D" groups=["rifle"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.258242, 0.0951049, 0)
script = ExtResource("1_1mpfk")
max_mag = 30
heat_generated = 7.1
zoom_position = Vector3(-0.29, 0.102, 0)
zoom_in_speed = 0.02
zoom_in_z_speed = 0.01

[node name="Player_Arms" parent="." instance=ExtResource("2_ma3mt")]
transform = Transform3D(-7.23998e-07, 5.52386e-15, 0.2, 0.0143517, 0.199484, 5.19531e-08, -0.199484, 0.0143517, -7.22132e-07, -0.10629, -0.228232, 0.348565)

[node name="Armature_001" parent="Player_Arms" index="0"]
transform = Transform3D(-1.06112e-06, 0, 0.293129, 0, 0.293129, 0, -0.293129, 0, -1.06112e-06, -4.76837e-07, 0, 0.582399)

[node name="Skeleton3D" parent="Player_Arms/Armature_001" index="0"]
bones/0/position = Vector3(-0.702123, -3.86454, -0.291286)
bones/0/rotation = Quaternion(-0.17981, 0.356419, 0.683863, 0.610709)
bones/0/scale = Vector3(1, 1, 1)
bones/1/position = Vector3(-0.0766296, 5.10981, -0.0766286)
bones/1/rotation = Quaternion(0.0192122, 0.141163, 0.301646, 0.942716)
bones/1/scale = Vector3(0.999999, 0.999999, 0.999999)
bones/2/position = Vector3(-3.91377e-06, 4.50457, 2.44057e-06)
bones/2/rotation = Quaternion(0.0849488, 0.35247, 0.6147, 0.700495)
bones/2/scale = Vector3(1, 1, 1)
bones/3/rotation = Quaternion(-0.133849, -0.00753288, -0.0442337, 0.989985)
bones/3/scale = Vector3(1, 1, 1)
bones/4/position = Vector3(1.80456e-06, 3.51943, -1.34735e-06)
bones/4/rotation = Quaternion(0.132369, -0.0427638, 0.274526, 0.951465)
bones/4/scale = Vector3(1, 1, 1)
bones/5/position = Vector3(2.54734e-06, 0.929182, -1.18374e-06)
bones/5/rotation = Quaternion(-0.0312871, -0.0334644, 0.579423, 0.813738)
bones/5/scale = Vector3(1, 1, 1)
bones/6/position = Vector3(-0.355631, 0.841114, 0.0443801)
bones/6/rotation = Quaternion(0.000456946, -0.012498, 0.479311, 0.877556)
bones/6/scale = Vector3(1, 1, 1)
bones/7/rotation = Quaternion(-0.0736205, -0.00622945, -0.0295195, 0.99683)
bones/7/scale = Vector3(1, 1, 1)
bones/8/position = Vector3(3.81124e-08, 3.53373, 1.08096e-07)
bones/8/rotation = Quaternion(0.186553, -0.0676742, 0.294551, 0.934804)
bones/8/scale = Vector3(1, 1, 1)
bones/9/position = Vector3(3.03201e-06, 1.40481, 5.67478e-07)
bones/9/rotation = Quaternion(-0.142487, 0.165425, 0.83183, 0.510285)
bones/9/scale = Vector3(1, 1, 1)
bones/10/position = Vector3(-8.99271e-07, 0.916713, -1.5922e-07)
bones/10/rotation = Quaternion(-0.0406844, -0.0218755, 0.277274, 0.95968)
bones/10/scale = Vector3(1, 1, 1)
bones/11/rotation = Quaternion(-0.00342581, -0.000315681, -0.0207324, 0.999779)
bones/11/scale = Vector3(1, 1, 1)
bones/12/position = Vector3(1.07767e-06, 3.51101, 1.7733e-07)
bones/12/rotation = Quaternion(0.0831871, -0.0261846, 0.223507, 0.970793)
bones/12/scale = Vector3(1, 1, 1)
bones/13/position = Vector3(1.66729e-06, 1.70018, 2.90244e-07)
bones/13/rotation = Quaternion(-0.147577, 0.151877, 0.883014, 0.418856)
bones/13/scale = Vector3(1, 1, 1)
bones/14/position = Vector3(7.85898e-07, 0.982114, -1.7424e-07)
bones/14/rotation = Quaternion(-0.0774983, -0.0202696, 0.0273764, 0.99641)
bones/14/scale = Vector3(1, 1, 1)
bones/15/rotation = Quaternion(0.154022, -0.00569618, -0.00363673, 0.988044)
bones/15/scale = Vector3(1, 1, 1)
bones/16/position = Vector3(9.88659e-07, 3.61486, 1.72529e-07)
bones/16/rotation = Quaternion(-0.115459, 0.000674934, 0.0830104, 0.989837)
bones/16/scale = Vector3(1, 1, 1)
bones/17/position = Vector3(8.75823e-07, 1.16202, -6.20143e-07)
bones/17/rotation = Quaternion(0.0191207, -0.00717875, -0.0853191, 0.996144)
bones/17/scale = Vector3(1, 1, 1)
bones/18/position = Vector3(-0.00122708, 0.930876, -0.00683217)
bones/18/rotation = Quaternion(-0.12255, 0.0499664, 0.812625, 0.567561)
bones/18/scale = Vector3(1, 1, 0.999999)
bones/19/position = Vector3(4.32388e-07, 2.35404, 5.84338e-08)
bones/19/rotation = Quaternion(0.291282, -0.63649, 0.131256, 0.702003)
bones/19/scale = Vector3(1, 1, 1)
bones/20/position = Vector3(6.95346e-07, 2.10945, -1.05259e-06)
bones/20/rotation = Quaternion(0.320121, 0.106218, -0.0570278, 0.939674)
bones/20/scale = Vector3(1, 1, 1)
bones/21/position = Vector3(-5.18799e-07, 0.422192, -2.75668e-06)
bones/21/rotation = Quaternion(-0.384703, 0.0978473, 0.134174, 0.90798)
bones/21/scale = Vector3(1, 1, 0.999999)
bones/22/position = Vector3(3.07946, -4.30136, 4.82055)
bones/22/rotation = Quaternion(-0.192564, 0.624134, 0.728655, 0.206003)
bones/22/scale = Vector3(0.999999, 0.999999, 0.999999)
bones/23/position = Vector3(-2.2979e-06, 5.10981, -1.4536e-06)
bones/23/rotation = Quaternion(0.0135497, -0.000658605, 0.0187753, 0.999732)
bones/23/scale = Vector3(0.999999, 1, 1)
bones/24/position = Vector3(0.467765, 4.9243, 0.462769)
bones/24/rotation = Quaternion(0.23972, -0.62364, -0.115181, 0.735078)
bones/24/scale = Vector3(0.999999, 1, 1)
bones/25/position = Vector3(-3.19372e-06, 2.35404, 2.67535e-06)
bones/25/rotation = Quaternion(-0.302961, -0.174746, -0.0759286, 0.933763)
bones/25/scale = Vector3(0.999999, 1, 1)
bones/26/position = Vector3(-5.2973e-07, 3.52179, -2.96357e-07)
bones/26/rotation = Quaternion(0.234578, -0.145528, -0.225001, 0.934435)
bones/26/scale = Vector3(1, 1, 1)
bones/27/position = Vector3(-2.41854e-07, 0.926571, 1.10082e-06)
bones/27/rotation = Quaternion(-0.0291461, 0.0421904, -0.15762, 0.986168)
bones/27/scale = Vector3(1, 1, 1)
bones/28/position = Vector3(5.87098e-07, 0.841549, -1.39178e-07)
bones/28/rotation = Quaternion(-0.0381531, 0.0019228, -0.285778, 0.957534)
bones/28/scale = Vector3(1, 1, 1)
bones/29/position = Vector3(-2.54757e-07, 2.35405, -7.18788e-07)
bones/29/rotation = Quaternion(-0.223398, -0.119019, -0.0243943, 0.967126)
bones/29/scale = Vector3(1, 1, 1)
bones/30/position = Vector3(5.21637e-07, 3.53373, 2.42456e-08)
bones/30/rotation = Quaternion(0.17677, -0.184538, -0.27197, 0.927756)
bones/30/scale = Vector3(0.999999, 1, 1)
bones/31/rotation = Quaternion(-0.0210868, 0.00934312, -0.285977, 0.957959)
bones/31/scale = Vector3(1, 1, 1)
bones/32/rotation = Quaternion(-0.0153609, 0.0140417, -0.321175, 0.946791)
bones/32/scale = Vector3(1, 1, 1)
bones/33/position = Vector3(-5.70224e-07, 2.35405, -8.91537e-07)
bones/33/rotation = Quaternion(-0.133476, -0.112772, -0.0206654, 0.984398)
bones/33/scale = Vector3(1, 1, 1)
bones/34/position = Vector3(1.08157e-06, 3.51101, 4.16129e-07)
bones/34/rotation = Quaternion(0.0231218, -0.0648377, -0.136496, 0.988246)
bones/34/scale = Vector3(1, 1, 1)
bones/35/position = Vector3(-6.50869e-07, 1.70018, 6.62566e-08)
bones/35/rotation = Quaternion(-0.0883997, -0.0695466, -0.2759, 0.954583)
bones/35/scale = Vector3(1, 1, 1)
bones/36/position = Vector3(1.35191e-06, 0.982111, -1.64792e-06)
bones/36/rotation = Quaternion(-0.0288637, -0.328976, -0.636577, 0.69693)
bones/36/scale = Vector3(0.999999, 1, 1)
bones/37/position = Vector3(0.125173, 2.37911, -0.0162877)
bones/37/rotation = Quaternion(0.0435265, -0.0935961, 0.0219749, 0.994416)
bones/37/scale = Vector3(1, 1, 1)
bones/38/position = Vector3(1.55201e-06, 3.61485, -1.89298e-06)
bones/38/rotation = Quaternion(-0.386642, 0.118297, -0.0557661, 0.91291)
bones/38/scale = Vector3(1, 1, 1)
bones/39/position = Vector3(-6.83992e-07, 1.16203, 7.89502e-08)
bones/39/rotation = Quaternion(0.131668, -0.374435, -0.396038, 0.828019)
bones/39/scale = Vector3(0.999999, 1, 1)
bones/40/position = Vector3(1.45362e-07, 0.825303, 1.65268e-06)
bones/40/rotation = Quaternion(-0.00636223, -0.0224488, -0.159011, 0.987001)
bones/40/scale = Vector3(1, 1, 1)
bones/41/position = Vector3(-0.197182, 3.62766, -0.292336)
bones/41/rotation = Quaternion(0.168219, 0.210162, -0.123472, 0.955138)
bones/41/scale = Vector3(1, 1, 1)
bones/42/position = Vector3(-1.36287e-06, 2.10945, 1.56488e-06)
bones/42/rotation = Quaternion(0.258217, 0.148172, -0.200466, 0.933371)
bones/42/scale = Vector3(1, 1, 0.999999)
bones/43/position = Vector3(-2.63845e-07, 0.4259, 7.79534e-07)
bones/43/rotation = Quaternion(-0.370865, 0.0231773, 0.0933141, 0.923696)
bones/43/scale = Vector3(1, 1, 0.999998)

[node name="Cube_001" parent="Player_Arms/Armature_001/Skeleton3D" index="0"]
layers = 2
material_overlay = SubResource("ShaderMaterial_wbipc")
cast_shadow = 0

[node name="AK74U" parent="Player_Arms/Armature_001/Skeleton3D/Cube_001" index="0" instance=ExtResource("5_0c360")]
transform = Transform3D(0.242831, 0, -6.99579, 0, 7, 0, 6.99579, 0, 0.242831, -5.05684, -13.2435, 14.2962)

[node name="762x39_Bullet" parent="Player_Arms/Armature_001/Skeleton3D/Cube_001/AK74U" index="0"]
visible = false
layers = 2
material_overlay = SubResource("ShaderMaterial_h0gdx")

[node name="762x39_BulletEmpty" parent="Player_Arms/Armature_001/Skeleton3D/Cube_001/AK74U" index="1"]
visible = false
layers = 2
material_overlay = SubResource("ShaderMaterial_h0gdx")

[node name="AK74U" parent="Player_Arms/Armature_001/Skeleton3D/Cube_001/AK74U" index="2"]
layers = 2
material_overlay = SubResource("ShaderMaterial_h0gdx")

[node name="AK74U_Mag_Empty" parent="Player_Arms/Armature_001/Skeleton3D/Cube_001/AK74U" index="3"]
layers = 2
material_overlay = SubResource("ShaderMaterial_h0gdx")

[node name="AK74U_Mag_Full" parent="Player_Arms/Armature_001/Skeleton3D/Cube_001/AK74U" index="4"]
visible = false
layers = 2
material_overlay = SubResource("ShaderMaterial_h0gdx")

[node name="ShootCast" type="RayCast3D" parent="Player_Arms/Armature_001/Skeleton3D/Cube_001/AK74U"]
unique_name_in_owner = true
transform = Transform3D(0.0275329, 0.0311744, 0.999136, -0.0165873, 0.999391, -0.030725, -0.999485, -0.015727, 0.0280332, 2.0124, 1.69557, -0.00257578)
target_position = Vector3(0, 10, 400)
collision_mask = 3
debug_shape_custom_color = Color(0, 1, 0, 1)

[node name="CasingDirection" type="Marker3D" parent="Player_Arms/Armature_001/Skeleton3D/Cube_001/AK74U"]
unique_name_in_owner = true
transform = Transform3D(0.0321434, -0.489023, 0.87168, -2.61025e-08, 0.87213, 0.489276, -0.999485, -0.015727, 0.0280332, 0.836927, 2.02418, 1.24533)

[node name="CasingSpawner" type="Marker3D" parent="Player_Arms/Armature_001/Skeleton3D/Cube_001/AK74U"]
unique_name_in_owner = true
transform = Transform3D(-7.15059e-06, 8.89609e-07, -1, -6.95007e-09, 1, -9.21381e-07, 1, 1.29137e-08, -7.2479e-06, -0.100252, 1.68147, -0.0470513)

[node name="FlashSpawner" type="Marker3D" parent="Player_Arms/Armature_001/Skeleton3D/Cube_001/AK74U"]
unique_name_in_owner = true
transform = Transform3D(-0.188993, -0.480458, 0.856413, -4.28919e-07, 0.87213, 0.489277, -0.98198, 0.0924694, -0.164827, 1.47438, 1.74305, 0.0395419)

[node name="Cube_002" parent="Player_Arms/Armature_001/Skeleton3D" index="1"]
layers = 2
material_overlay = SubResource("ShaderMaterial_3orc7")
cast_shadow = 0

[node name="ShotCooldown" type="Timer" parent="."]
wait_time = 0.5
one_shot = true

[node name="ShotRecovery" type="Timer" parent="."]
wait_time = 0.19
one_shot = true

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.258242, 0.0951049, 0)
top_level = true
fov = 90.0

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]

[connection signal="timeout" from="ShotCooldown" to="." method="_on_shot_cooldown_timeout"]
[connection signal="timeout" from="ShotRecovery" to="." method="_on_shot_recovery_timeout"]

[editable path="Player_Arms"]
[editable path="Player_Arms/Armature_001/Skeleton3D/Cube_001/AK74U"]
